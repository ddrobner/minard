{% extends "layout.html" %}
{% block title %}Roboshifter Log{% endblock %}

{% block head %}
    {{ super() }}
    <style>
        pre {
            tab-size: 4;
            counter-reset: linecounter;
        }

        pre span.line {
            counter-increment: linecounter;
        }
        
        .line {
            background: #0000;
            color: #000;
            opacity: 1.0;
        }

        pre span.line::before{
            content: counter(linecounter);
            width: 30px;
            display: inline-block;
            border-right: 1px dotted #fff;
            padding-right: 3px;
            margin-right: 5px;
            text-align: right;
        }
    </style>
    <script type="text/javascript">
        function addLineClass(pre){
            var lines = pre.innerText.split("\n");
            while(pre.childNodes.length > 0) {
                pre.removeChild(pre.childNodes[0]);
            }
            for(var i =0; i < lines.length; i++){
                var span = document.createElement("span");
                span.className = "line";
                span.innerText = lines[i];
                pre.appendChild(span);
                pre.appendChild(document.createTextNode("\n"))
            }
        }
        window.addEventListener("load", function () {
            var pres = document.getElementsByTagName("pre");
            for(var i = 0; i < pres.length; i++){
                addLineClass(pres[i]);
            }
        }, false);
    </script>


{% endblock %}

{% block body %}
    {{ super() }}
    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <center>
                <h2 style="display:inline">Roboshifter Logs</h2>
            </center>
        </div>
    </div>
    <!-- Spacing the title and body here. Should figure out a proper way to do this. -->
    <p></p>
    <p></p>
    <div class="container">
        <div class="col-md-12">
            <form method="get" action="{{ url_for('roboshifter_log') }}" role='form'>
                <select name="date" onchange="this.form.submit()">
                    <option value="current" {% if selected_opt == "current" %} SELECTED {% endif %}>Current</option>
                    {% for d in dates %}
                        <option value="{{ d }}" {% if selected_opt == d %} SELECTED {% endif %}>{{ d[:-3] }}</option>
                    {% endfor %}
                </select>
            </form>
        </div>
    </div>
    <p></p>
    <p></p>
    <div class="container">
        <div class="col-md-12">
            <pre>
                {%- for l in roboshifter_log -%}
                    {{ l }}
                {%- endfor -%}
            </pre>
        </div>
    </div>
{% endblock %}